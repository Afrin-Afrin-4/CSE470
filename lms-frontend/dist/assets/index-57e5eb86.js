import{r as s,a as H,L as C,u as R,b as F,N as q,B as J,R as Q,c as E,d as K}from"./vendor-d9d11f17.js";import{a as S}from"./utils-78d57de0.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))d(t);new MutationObserver(t=>{for(const j of t)if(j.type==="childList")for(const o of j.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&d(o)}).observe(document,{childList:!0,subtree:!0});function c(t){const j={};return t.integrity&&(j.integrity=t.integrity),t.referrerPolicy&&(j.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?j.credentials="include":t.crossOrigin==="anonymous"?j.credentials="omit":j.credentials="same-origin",j}function d(t){if(t.ep)return;t.ep=!0;const j=c(t);fetch(t.href,j)}})();var O={exports:{}},T={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X=s,Z=Symbol.for("react.element"),ee=Symbol.for("react.fragment"),se=Object.prototype.hasOwnProperty,ae=X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,te={key:!0,ref:!0,__self:!0,__source:!0};function V(r,n,c){var d,t={},j=null,o=null;c!==void 0&&(j=""+c),n.key!==void 0&&(j=""+n.key),n.ref!==void 0&&(o=n.ref);for(d in n)se.call(n,d)&&!te.hasOwnProperty(d)&&(t[d]=n[d]);if(r&&r.defaultProps)for(d in n=r.defaultProps,n)t[d]===void 0&&(t[d]=n[d]);return{$$typeof:Z,type:r,key:j,ref:o,props:t,_owner:ae.current}}T.Fragment=ee;T.jsx=V;T.jsxs=V;O.exports=T;var e=O.exports,U={},z=H;U.createRoot=z.createRoot,U.hydrateRoot=z.hydrateRoot;const D=s.createContext(),B=({children:r})=>{const[n,c]=s.useState(null),[d,t]=s.useState(!0),[j,o]=s.useState(!1);s.useEffect(()=>{h()},[]);const h=async()=>{try{const l=await S.get("/api/auth/me",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});c(l.data),o(!0),t(!1)}catch(l){console.error(l),t(!1)}},f={user:n,loading:d,isAuthenticated:j,register:async l=>{try{const i=await S.post("/api/auth/register",l);return localStorage.setItem("token",i.data.token),c(i.data),o(!0),i.data}catch(i){throw i.response.data}},login:async l=>{try{const i=await S.post("/api/auth/login",l);return localStorage.setItem("token",i.data.token),c(i.data),o(!0),i.data}catch(i){throw i.response.data}},logout:()=>{localStorage.removeItem("token"),c(null),o(!1)},loadUser:h};return e.jsx(D.Provider,{value:f,children:r})};const re=()=>e.jsxs("div",{className:"home",children:[e.jsxs("div",{className:"hero-section",children:[e.jsx("div",{className:"hero-overlay"}),e.jsxs("div",{className:"hero-content container",children:[e.jsxs("div",{className:"hero-text",children:[e.jsxs("h1",{className:"hero-title",children:["Transform Your Future with ",e.jsx("span",{className:"highlight",children:"IntelliLearn"})]}),e.jsx("p",{className:"hero-subtitle",children:"Discover, learn, and master new skills with our world-class online learning platform designed for the modern learner."}),e.jsxs("div",{className:"hero-actions",children:[e.jsx(C,{to:"/courses",className:"btn btn-primary",children:"Explore Courses"}),e.jsx(C,{to:"/register",className:"btn btn-secondary",children:"Start Free Trial"})]})]}),e.jsx("div",{className:"hero-image",children:e.jsxs("div",{className:"hero-graphic",children:[e.jsx("div",{className:"graphic-element graphic-1"}),e.jsx("div",{className:"graphic-element graphic-2"}),e.jsx("div",{className:"graphic-element graphic-3"})]})})]})]}),e.jsx("div",{className:"features-section",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{className:"section-title",children:"Why Choose IntelliLearn?"}),e.jsx("p",{className:"section-subtitle",children:"We provide the tools and resources you need to succeed in your learning journey."})]}),e.jsxs("div",{className:"features-grid",children:[e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:e.jsx("span",{className:"icon",children:"ðŸŽ“"})}),e.jsx("h3",{className:"feature-title",children:"Expert Instructors"}),e.jsx("p",{className:"feature-description",children:"Learn from industry professionals with real-world experience and proven teaching methods."})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:e.jsx("span",{className:"icon",children:"ðŸ“±"})}),e.jsx("h3",{className:"feature-title",children:"Learn Anywhere"}),e.jsx("p",{className:"feature-description",children:"Access courses 24/7 from any device. Learn at your own pace, anytime, anywhere."})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:e.jsx("span",{className:"icon",children:"ðŸ†"})}),e.jsx("h3",{className:"feature-title",children:"Certification"}),e.jsx("p",{className:"feature-description",children:"Earn recognized certificates to boost your career prospects and showcase skills."})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:e.jsx("span",{className:"icon",children:"ðŸ’¬"})}),e.jsx("h3",{className:"feature-title",children:"Community Support"}),e.jsx("p",{className:"feature-description",children:"Connect with peers and instructors in our vibrant learning community."})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:e.jsx("span",{className:"icon",children:"ðŸ“Š"})}),e.jsx("h3",{className:"feature-title",children:"Progress Tracking"}),e.jsx("p",{className:"feature-description",children:"Monitor your learning journey with detailed analytics and progress reports."})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:e.jsx("span",{className:"icon",children:"ðŸ’°"})}),e.jsx("h3",{className:"feature-title",children:"Affordable Pricing"}),e.jsx("p",{className:"feature-description",children:"High-quality education at competitive prices with flexible payment options."})]})]})]})}),e.jsx("div",{className:"stats-section",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-number",children:"10,000+"}),e.jsx("div",{className:"stat-label",children:"Active Students"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-number",children:"200+"}),e.jsx("div",{className:"stat-label",children:"Expert Instructors"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-number",children:"500+"}),e.jsx("div",{className:"stat-label",children:"Quality Courses"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-number",children:"95%"}),e.jsx("div",{className:"stat-label",children:"Satisfaction Rate"})]})]})})}),e.jsx("div",{className:"testimonials-section",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{className:"section-title",children:"What Our Students Say"}),e.jsx("p",{className:"section-subtitle",children:"Hear from learners who have transformed their careers with IntelliLearn."})]}),e.jsxs("div",{className:"testimonials-grid",children:[e.jsxs("div",{className:"testimonial-card",children:[e.jsxs("div",{className:"testimonial-rating",children:[e.jsx("span",{className:"star",children:"â˜…"}),e.jsx("span",{className:"star",children:"â˜…"}),e.jsx("span",{className:"star",children:"â˜…"}),e.jsx("span",{className:"star",children:"â˜…"}),e.jsx("span",{className:"star",children:"â˜…"})]}),e.jsx("p",{className:"testimonial-content",children:'"IntelliLearn transformed my career. The courses are comprehensive and the instructors are exceptional. I landed a job with 40% higher salary after completing their data science program."'}),e.jsxs("div",{className:"testimonial-author",children:[e.jsx("div",{className:"author-avatar",children:e.jsx("div",{className:"avatar-placeholder",children:"SJ"})}),e.jsxs("div",{className:"author-info",children:[e.jsx("h4",{className:"author-name",children:"Sarah Johnson"}),e.jsx("p",{className:"author-title",children:"Data Scientist at TechCorp"})]})]})]}),e.jsxs("div",{className:"testimonial-card",children:[e.jsxs("div",{className:"testimonial-rating",children:[e.jsx("span",{className:"star",children:"â˜…"}),e.jsx("span",{className:"star",children:"â˜…"}),e.jsx("span",{className:"star",children:"â˜…"}),e.jsx("span",{className:"star",children:"â˜…"}),e.jsx("span",{className:"star",children:"â˜…"})]}),e.jsx("p",{className:"testimonial-content",children:'"The flexibility of learning at my own pace while having access to expert instructors made all the difference. The community support is outstanding and keeps me motivated throughout my learning journey."'}),e.jsxs("div",{className:"testimonial-author",children:[e.jsx("div",{className:"author-avatar",children:e.jsx("div",{className:"avatar-placeholder",children:"MC"})}),e.jsxs("div",{className:"author-info",children:[e.jsx("h4",{className:"author-name",children:"Michael Chen"}),e.jsx("p",{className:"author-title",children:"Software Developer"})]})]})]}),e.jsxs("div",{className:"testimonial-card",children:[e.jsxs("div",{className:"testimonial-rating",children:[e.jsx("span",{className:"star",children:"â˜…"}),e.jsx("span",{className:"star",children:"â˜…"}),e.jsx("span",{className:"star",children:"â˜…"}),e.jsx("span",{className:"star",children:"â˜…"}),e.jsx("span",{className:"star",children:"â˜…"})]}),e.jsx("p",{className:"testimonial-content",children:'"As a busy professional, I needed a platform that could adapt to my schedule. IntelliLearn exceeded my expectations with its intuitive interface and high-quality content. Highly recommended!"'}),e.jsxs("div",{className:"testimonial-author",children:[e.jsx("div",{className:"author-avatar",children:e.jsx("div",{className:"avatar-placeholder",children:"ER"})}),e.jsxs("div",{className:"author-info",children:[e.jsx("h4",{className:"author-name",children:"Emma Rodriguez"}),e.jsx("p",{className:"author-title",children:"Marketing Director"})]})]})]})]})]})}),e.jsx("div",{className:"cta-section",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"cta-content",children:[e.jsx("h2",{className:"cta-title",children:"Ready to Transform Your Skills?"}),e.jsx("p",{className:"cta-subtitle",children:"Join thousands of students who have advanced their careers with IntelliLearn. Start your learning journey today."}),e.jsxs("div",{className:"cta-actions",children:[e.jsx(C,{to:"/courses",className:"btn btn-primary",children:"Browse All Courses"}),e.jsx(C,{to:"/register",className:"btn btn-outline",children:"Sign Up Free"})]})]})})})]});const ne=()=>{const[r,n]=s.useState({email:"",password:""}),[c,d]=s.useState(""),{login:t}=s.useContext(D),j=R(),{email:o,password:h}=r,u=b=>{n({...r,[b.target.name]:b.target.value})},m=async b=>{b.preventDefault();try{await t(r),j("/dashboard")}catch(f){console.error(f),d("Invalid email or password. Please try again.")}};return e.jsx("div",{className:"auth-container",children:e.jsxs("div",{className:"auth-card",children:[e.jsxs("div",{className:"auth-header",children:[e.jsx("h2",{children:"Welcome Back"}),e.jsx("p",{children:"Sign in to continue your learning journey"})]}),e.jsxs("div",{className:"auth-body",children:[c&&e.jsx("div",{className:"error-message",children:c}),e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",placeholder:"Enter your email",name:"email",value:o,onChange:u,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",placeholder:"Enter your password",name:"password",value:h,onChange:u,minLength:"6",required:!0})]}),e.jsx("button",{type:"submit",className:"btn",children:"Sign In"})]}),e.jsx("div",{className:"auth-footer",children:e.jsxs("p",{children:["Don't have an account? ",e.jsx(C,{to:"/register",children:"Sign Up"})]})})]})]})})},le=()=>{const[r,n]=s.useState({name:"",email:"",password:"",password2:"",role:"student"}),[c,d]=s.useState(""),[t,j]=s.useState(""),{register:o}=s.useContext(D),h=R(),{name:u,email:m,password:b,password2:f,role:l}=r,i=g=>{n({...r,[g.target.name]:g.target.value})},a=async g=>{if(g.preventDefault(),b!==f){d("Passwords do not match");return}try{await o({name:u,email:m,password:b,role:l}),j("Registration successful! Redirecting to dashboard..."),setTimeout(()=>{h("/dashboard")},2e3)}catch(w){console.error(w),d("Registration failed. Please try again.")}};return e.jsx("div",{className:"auth-container",children:e.jsxs("div",{className:"auth-card",children:[e.jsxs("div",{className:"auth-header",children:[e.jsx("h2",{children:"Create Account"}),e.jsx("p",{children:"Join our learning community today"})]}),e.jsxs("div",{className:"auth-body",children:[c&&e.jsx("div",{className:"error-message",children:c}),t&&e.jsx("div",{className:"success-message",children:t}),e.jsxs("form",{onSubmit:a,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Full Name"}),e.jsx("input",{type:"text",id:"name",placeholder:"Enter your full name",name:"name",value:u,onChange:i,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",placeholder:"Enter your email",name:"email",value:m,onChange:i,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"role",children:"Role"}),e.jsxs("div",{className:"role-selection",children:[e.jsxs("div",{className:`role-option ${l==="student"?"selected":""}`,onClick:()=>n({...r,role:"student"}),children:[e.jsx("div",{className:"role-icon",children:"ðŸ‘¨â€ðŸŽ“"}),e.jsx("div",{className:"role-name",children:"Student"})]}),e.jsxs("div",{className:`role-option ${l==="instructor"?"selected":""}`,onClick:()=>n({...r,role:"instructor"}),children:[e.jsx("div",{className:"role-icon",children:"ðŸ‘¨â€ðŸ«"}),e.jsx("div",{className:"role-name",children:"Instructor"})]}),e.jsxs("div",{className:`role-option ${l==="admin"?"selected":""}`,onClick:()=>n({...r,role:"admin"}),children:[e.jsx("div",{className:"role-icon",children:"ðŸ‘¨â€ðŸ’¼"}),e.jsx("div",{className:"role-name",children:"Admin"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",placeholder:"Create a password",name:"password",value:b,onChange:i,minLength:"6",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password2",children:"Confirm Password"}),e.jsx("input",{type:"password",id:"password2",placeholder:"Confirm your password",name:"password2",value:f,onChange:i,minLength:"6",required:!0})]}),e.jsx("button",{type:"submit",className:"btn",children:"Create Account"})]}),e.jsx("div",{className:"auth-footer",children:e.jsxs("p",{children:["Already have an account? ",e.jsx(C,{to:"/login",children:"Sign In"})]})})]})]})})};const ie=()=>{const{user:r,isAuthenticated:n,loadUser:c}=s.useContext(D),[d,t]=s.useState([]),[j,o]=s.useState([]),[h,u]=s.useState([]),[m,b]=s.useState([]),[f,l]=s.useState(!0),[i,a]=s.useState(""),g=R();s.useEffect(()=>{n?(c(),w()):g("/login")},[n,g]),s.useEffect(()=>{if(i){const p=d.filter(x=>x.title.toLowerCase().includes(i.toLowerCase())||x.description.toLowerCase().includes(i.toLowerCase()));o(p)}else o(d)},[i,d]);const w=async()=>{try{const p=await S.get("/api/users/me/courses",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),x=await S.get("/api/progress",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),N=[];x.data.data.forEach(v=>{v.lastUpdated&&N.push({id:v.course._id,title:`Progress updated in ${v.course.title}`,time:new Date(v.lastUpdated).toLocaleString(),type:"progress"})}),t(p.data.data),o(p.data.data),u(x.data.data),b(N.slice(0,5)),l(!1)}catch(p){console.error(p),l(!1)}},k=p=>{const x=h.find(N=>N.course._id===p);return x?x.overallProgress:0};return n?e.jsxs("div",{className:"dashboard",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Student Dashboard"}),e.jsxs("p",{children:["Welcome back, ",r==null?void 0:r.name]})]}),e.jsx("div",{children:e.jsx("button",{className:"btn",onClick:()=>g("/courses"),children:"Browse Courses"})})]}),e.jsxs("div",{className:"welcome-banner",children:[e.jsx("h2",{children:"Continue Your Learning Journey"}),e.jsx("p",{children:"Track your progress, complete assignments, and achieve your educational goals."})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"ðŸ“š"}),e.jsx("div",{className:"stat-value",children:d.length}),e.jsx("div",{className:"stat-label",children:"Enrolled Courses"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"âœ…"}),e.jsx("div",{className:"stat-value",children:h.filter(p=>p.completedAt).length}),e.jsx("div",{className:"stat-label",children:"Completed Courses"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"â±ï¸"}),e.jsxs("div",{className:"stat-value",children:[h.length>0?Math.round(h.reduce((p,x)=>p+x.overallProgress,0)/h.length):0,"%"]}),e.jsx("div",{className:"stat-label",children:"Avg. Progress"})]})]}),e.jsx("div",{className:"dashboard-search",children:e.jsx("input",{type:"text",placeholder:"Search your enrolled courses...",className:"search-bar",value:i,onChange:p=>a(p.target.value)})}),e.jsx("h2",{className:"section-title",children:"Your Enrolled Courses"}),f?e.jsx("p",{children:"Loading your courses..."}):j.length>0?e.jsx("div",{className:"courses-grid",children:j.map(p=>{const x=k(p._id);return e.jsxs("div",{className:"course-card",children:[e.jsx("img",{src:p.thumbnail||"https://via.placeholder.com/300x200/4361ee/ffffff?text=Course+Image",alt:p.title,className:"course-image"}),e.jsxs("div",{className:"course-info",children:[e.jsx("h3",{children:p.title}),e.jsxs("p",{className:"course-description",children:[p.description.substring(0,100),"..."]}),e.jsxs("div",{className:"progress-container",children:[e.jsxs("div",{className:"progress-label",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[x,"%"]})]}),e.jsx("div",{className:"progress-bar-bg",children:e.jsx("div",{className:"progress-bar-fill",style:{width:`${x}%`}})})]}),e.jsxs("div",{className:"course-actions",children:[e.jsx(C,{to:`/courses/${p._id}`,className:"btn",children:"Continue Learning"}),e.jsx(C,{to:`/student/attendance/${p._id}`,className:"btn btn-outline",children:"View Attendance"})]})]})]},p._id)})}):e.jsxs("div",{className:"no-courses",children:[e.jsx("h3",{children:"No Enrolled Courses Found"}),e.jsx("p",{children:"We couldn't find any courses matching your search. Try adjusting your search term."}),e.jsx("button",{className:"btn",onClick:()=>a(""),children:"Clear Search"})]}),m.length>0&&e.jsxs("div",{className:"recent-activity",children:[e.jsx("h2",{children:"Recent Activity"}),e.jsx("ul",{className:"activity-list",children:m.map((p,x)=>e.jsxs("li",{className:"activity-item",children:[e.jsx("div",{className:"activity-icon",children:p.type==="progress"?"ðŸ“Š":"ðŸ“"}),e.jsxs("div",{className:"activity-content",children:[e.jsx("h4",{children:p.title}),e.jsx("p",{children:"Course activity"})]}),e.jsx("div",{className:"activity-time",children:p.time})]},x))})]})]}):null};const ce=(r,n)=>{const[c,d]=s.useState(r);return s.useEffect(()=>{const t=setTimeout(()=>{d(r)},n);return()=>{clearTimeout(t)}},[r,n]),c},de=()=>{const[r,n]=s.useState([]),[c,d]=s.useState(!0),[t,j]=s.useState(null),[o,h]=s.useState(""),[u,m]=s.useState(""),b=ce(o,500);s.useEffect(()=>{f()},[b,u]);const f=async()=>{try{d(!0);const a={};b&&(a.search=b),u&&(a.level=u);const g=await S.get("/api/courses",{params:a});n(g.data.data),d(!1)}catch(a){console.error(a),j("Failed to fetch courses"),d(!1)}},l=()=>["Beginner","Intermediate","Advanced"],i=o!==b;return c&&!i?e.jsx("div",{className:"course-list",children:"Loading..."}):t?e.jsxs("div",{className:"course-list",children:["Error: ",t]}):e.jsxs("div",{className:"course-list",children:[e.jsxs("div",{className:"course-list-header",children:[e.jsx("h1",{children:"Explore Our Courses"}),e.jsxs("div",{className:"search-filters",children:[e.jsx("input",{type:"text",placeholder:"Search courses...",className:"search-bar",value:o,onChange:a=>h(a.target.value)}),e.jsxs("select",{className:"filter-select",value:u,onChange:a=>m(a.target.value),children:[e.jsx("option",{value:"",children:"All Levels"}),l().map(a=>e.jsx("option",{value:a,children:a},a))]})]})]}),i&&e.jsx("div",{className:"search-status",children:"Searching..."}),!i&&r.length>0?e.jsx("div",{className:"courses-grid",children:r.map(a=>{var g,w;return e.jsxs("div",{className:"course-card",children:[e.jsx("img",{src:a.thumbnail||"https://via.placeholder.com/300x200/4361ee/ffffff?text=Course+Image",alt:a.title,className:"course-image"}),e.jsxs("div",{className:"course-info",children:[e.jsx("h3",{children:a.title}),e.jsxs("p",{className:"instructor",children:["By ",(g=a.instructor)==null?void 0:g.name]}),e.jsx("p",{className:"description",children:a.description}),e.jsxs("div",{className:"course-meta",children:[e.jsx("span",{className:"level",children:a.level||"Beginner"}),e.jsxs("span",{className:"price",children:["$",a.price]}),e.jsxs("span",{className:"enrolled",children:[((w=a.studentsEnrolled)==null?void 0:w.length)||0," enrolled"]})]}),e.jsx("div",{className:"course-actions",children:e.jsx(C,{to:`/courses/${a._id}`,className:"btn",children:"View Details"})})]})]},a._id)})}):!i&&r.length===0?e.jsxs("div",{className:"no-courses",children:[e.jsx("h3",{children:"No Courses Found"}),e.jsx("p",{children:"We couldn't find any courses matching your criteria. Try adjusting your search or filters."}),e.jsx("button",{className:"btn",onClick:()=>{h(""),m("")},children:"Clear Filters"})]}):null]})};const oe=({courseId:r})=>{const[n,c]=s.useState(null),[d,t]=s.useState(!0),[j,o]=s.useState(null);s.useEffect(()=>{h(),u()},[r]);const h=async()=>{try{const l=await S.get(`/api/progress/${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});c(l.data.data),t(!1)}catch(l){console.error(l),t(!1)}},u=async()=>{try{const l=await S.get(`/api/courses/${r}`);o(l.data.data)}catch(l){console.error(l)}},m=async l=>{try{await S.put(`/api/progress/${r}/lessons/${l}`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),h()}catch(i){console.error(i),alert("Failed to update progress")}};if(d)return e.jsx("div",{className:"progress-tracker",children:"Loading progress..."});const b=(n==null?void 0:n.lessonsCompleted)||[],f=(n==null?void 0:n.overallProgress)||0;return e.jsxs("div",{className:"progress-tracker",children:[e.jsxs("div",{className:"progress-header",children:[e.jsx("h3",{children:"Your Progress"}),e.jsx("div",{className:"progress-bar-container",children:e.jsx("div",{className:"progress-bar",style:{width:`${f}%`}})}),e.jsxs("p",{children:[f,"% Complete"]})]}),j&&j.lessons&&e.jsxs("div",{className:"lessons-list",children:[e.jsx("h4",{children:"Lessons"}),j.lessons.map((l,i)=>{const a=b.some(g=>g.lessonId===l._id);return e.jsxs("div",{className:`lesson-item ${a?"completed":""}`,children:[e.jsxs("div",{className:"lesson-info",children:[e.jsxs("span",{className:"lesson-number",children:[i+1,"."]}),e.jsx("span",{className:"lesson-title",children:l.title}),l.duration&&e.jsx("span",{className:"lesson-duration",children:l.duration})]}),e.jsx("button",{className:`completion-toggle ${a?"completed":""}`,onClick:()=>m(l._id),children:a?"Completed":"Mark Complete"})]},l._id)})]})]})};const he=()=>{var k,p,x,N,v;const{id:r}=F(),n=R(),{isAuthenticated:c,user:d}=s.useContext(D),[t,j]=s.useState(null),[o,h]=s.useState(!0),[u,m]=s.useState(null),[b,f]=s.useState(!1),[l,i]=s.useState(null);s.useEffect(()=>{a()},[r]);const a=async()=>{try{const y=await S.get(`/api/courses/${r}`);if(j(y.data.data),c)try{const L=await S.get(`/api/progress/course/${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});i(L.data.data)}catch{console.log("Could not fetch progress data")}h(!1)}catch(y){console.error(y),m("Failed to fetch course details"),h(!1)}},g=async()=>{if(!c){n("/login");return}if(t.price>0){n(`/checkout/${r}`);return}f(!0);try{await S.put(`/api/courses/${r}/enroll`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),a()}catch(y){console.error(y),alert("Failed to enroll in the course")}finally{f(!1)}},w=()=>{var y;return!c||!t||!d?!1:(y=t.studentsEnrolled)==null?void 0:y.some(L=>L._id===d._id)};return o?e.jsx("div",{className:"course-detail",children:"Loading..."}):u?e.jsxs("div",{className:"course-detail",children:["Error: ",u]}):e.jsx("div",{className:"course-detail",children:t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"course-header",children:[e.jsx("h1",{children:t.title}),e.jsxs("p",{className:"instructor",children:[e.jsx("span",{className:"instructor-icon",children:"ðŸ‘¨â€ðŸ«"}),"By ",(k=t.instructor)==null?void 0:k.name]})]}),e.jsxs("div",{className:"course-content",children:[e.jsxs("div",{className:"course-main",children:[e.jsx("img",{src:t.thumbnail||"https://via.placeholder.com/800x400/4361ee/ffffff?text=Course+Image",alt:t.title,className:"course-image"}),e.jsxs("div",{className:"course-card",children:[e.jsx("h2",{children:"About This Course"}),e.jsx("p",{className:"course-description",children:t.description}),e.jsxs("div",{className:"course-meta",children:[e.jsxs("div",{className:"meta-item",children:[e.jsx("span",{className:"meta-label",children:"Level"}),e.jsx("span",{className:"meta-value",children:t.level||"Beginner"})]}),e.jsxs("div",{className:"meta-item",children:[e.jsx("span",{className:"meta-label",children:"Duration"}),e.jsx("span",{className:"meta-value",children:t.duration||"N/A"})]}),e.jsxs("div",{className:"meta-item",children:[e.jsx("span",{className:"meta-label",children:"Lessons"}),e.jsx("span",{className:"meta-value",children:((p=t.lessons)==null?void 0:p.length)||0})]}),e.jsxs("div",{className:"meta-item",children:[e.jsx("span",{className:"meta-label",children:"Students"}),e.jsx("span",{className:"meta-value",children:((x=t.studentsEnrolled)==null?void 0:x.length)||0})]})]})]}),e.jsxs("div",{className:"course-lessons",children:[e.jsx("h2",{children:"Course Curriculum"}),t.lessons&&t.lessons.length>0?e.jsx("div",{className:"lessons-list",children:t.lessons.map((y,L)=>e.jsxs("div",{className:"lesson-item",children:[e.jsxs("div",{className:"lesson-header",children:[e.jsxs("h3",{children:[L+1,". ",y.title]}),y.duration&&e.jsx("span",{className:"duration",children:y.duration})]}),e.jsx("p",{className:"lesson-description",children:y.description})]},L))}):e.jsx("p",{children:"No lessons available yet."})]}),w()&&l&&e.jsxs("div",{className:"course-card",children:[e.jsx("h2",{children:"Your Progress"}),e.jsxs("div",{className:"progress-container",children:[e.jsxs("div",{className:"progress-label",children:[e.jsx("span",{children:"Overall Progress"}),e.jsxs("span",{children:[l.overallProgress,"%"]})]}),e.jsx("div",{className:"progress-bar-bg",children:e.jsx("div",{className:"progress-bar-fill",style:{width:`${l.overallProgress}%`}})})]}),e.jsx(oe,{courseId:r})]})]}),e.jsx("div",{className:"course-sidebar",children:e.jsxs("div",{className:"course-info-card",children:[e.jsx("h2",{children:"Course Info"}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"label",children:"Level:"}),e.jsx("span",{className:"value",children:t.level||"Beginner"})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"label",children:"Duration:"}),e.jsx("span",{className:"value",children:t.duration||"N/A"})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"label",children:"Lessons:"}),e.jsx("span",{className:"value",children:((N=t.lessons)==null?void 0:N.length)||0})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"label",children:"Students:"}),e.jsx("span",{className:"value",children:((v=t.studentsEnrolled)==null?void 0:v.length)||0})]}),e.jsx("div",{className:"price",children:t.price>0?`$${t.price}`:"FREE"}),w()?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"enrolled-message",children:"âœ“ You are enrolled in this course"}),e.jsx("button",{className:"btn btn-enrolled",onClick:()=>n(`/courses/${r}/learn`),children:"Continue Learning"}),e.jsx("button",{className:"btn btn-outline",onClick:()=>n(`/student/attendance/${r}`),children:"View Attendance"})]}):e.jsx("button",{className:"btn",onClick:g,disabled:b,children:b?"Enrolling...":t.price>0?`Enroll Now ($${t.price})`:"Enroll Now (Free)"})]})})]})]})})};const ue=()=>{const[r,n]=s.useState([]),[c,d]=s.useState([]),[t,j]=s.useState([]),[o,h]=s.useState([]),[u,m]=s.useState(0),[b,f]=s.useState(!0),[l,i]=s.useState({totalRevenue:0,activeCourses:0,instructorCount:0,studentCount:0}),[a,g]=s.useState(""),[w,k]=s.useState("");s.useEffect(()=>{p()},[]),s.useEffect(()=>{if(a){const x=r.filter(N=>N.name.toLowerCase().includes(a.toLowerCase())||N.email.toLowerCase().includes(a.toLowerCase())||N.role.toLowerCase().includes(a.toLowerCase()));d(x)}else d(r)},[a,r]),s.useEffect(()=>{if(w){const x=t.filter(N=>{var v;return N.title.toLowerCase().includes(w.toLowerCase())||((v=N.instructor)==null?void 0:v.name)&&N.instructor.name.toLowerCase().includes(w.toLowerCase())});h(x)}else h(t)},[w,t]);const p=async()=>{try{const[x,N]=await Promise.all([S.get("/api/users",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),S.get("/api/courses")]),v=x.data.data,y=N.data.data,L=y.reduce((_,W)=>{var M;return _+(((M=W.studentsEnrolled)==null?void 0:M.length)||0)},0),A=v.filter(_=>_.role==="instructor").length,$=v.filter(_=>_.role==="student").length,P=L*50;n(v),d(v),j(y),h(y),m(L),i({totalRevenue:P,activeCourses:y.filter(_=>_.isPublished).length,instructorCount:A,studentCount:$}),f(!1)}catch(x){console.error(x),f(!1)}};return b?e.jsx("div",{className:"admin-dashboard",children:"Loading dashboard..."}):e.jsxs("div",{className:"admin-dashboard",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Admin Dashboard"}),e.jsx("p",{children:"Platform overview and management"})]}),e.jsx("div",{children:e.jsx(C,{to:"/admin/reports",className:"btn btn-primary",children:"View Detailed Reports"})})]}),e.jsxs("div",{className:"welcome-banner",children:[e.jsx("h2",{children:"Platform Management Center"}),e.jsx("p",{children:"Monitor platform performance, manage users and courses, and generate reports."})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"ðŸ‘¥"}),e.jsx("div",{className:"stat-value",children:r.length}),e.jsx("div",{className:"stat-label",children:"Total Users"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"ðŸ“š"}),e.jsxs("div",{className:"stat-value",children:[l.activeCourses,"/",t.length]}),e.jsx("div",{className:"stat-label",children:"Active/Total Courses"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"ðŸ’°"}),e.jsxs("div",{className:"stat-value",children:["$",l.totalRevenue.toLocaleString()]}),e.jsx("div",{className:"stat-label",children:"Total Revenue"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"ðŸŽ“"}),e.jsx("div",{className:"stat-value",children:u}),e.jsx("div",{className:"stat-label",children:"Total Enrollments"})]})]}),e.jsxs("div",{className:"dashboard-content",children:[e.jsxs("div",{className:"users-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"User Management"}),e.jsx("div",{className:"search-container",children:e.jsx("input",{type:"text",placeholder:"Search users...",className:"search-bar",value:a,onChange:x=>g(x.target.value)})})]}),e.jsxs("div",{className:"user-stats",children:[e.jsxs("div",{className:"user-stat-card",children:[e.jsx("h3",{children:l.studentCount}),e.jsx("p",{children:"Students"}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${l.studentCount/r.length*100}%`}})})]}),e.jsxs("div",{className:"user-stat-card",children:[e.jsx("h3",{children:l.instructorCount}),e.jsx("p",{children:"Instructors"}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${l.instructorCount/r.length*100}%`}})})]}),e.jsxs("div",{className:"user-stat-card",children:[e.jsx("h3",{children:r.filter(x=>x.role==="admin").length}),e.jsx("p",{children:"Administrators"}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${r.filter(x=>x.role==="admin").length/r.length*100}%`}})})]})]}),e.jsx("div",{className:"users-table-container",children:e.jsxs("table",{className:"admin-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Joined"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:c.slice(0,5).map(x=>e.jsxs("tr",{children:[e.jsx("td",{children:x.name}),e.jsx("td",{children:x.email}),e.jsx("td",{children:e.jsx("span",{className:`role-badge ${x.role}`,children:x.role})}),e.jsx("td",{children:new Date(x.createdAt).toLocaleDateString()}),e.jsx("td",{children:e.jsx(C,{to:`/admin/users/${x._id}`,className:"btn btn-small btn-view",children:"View"})})]},x._id))})]})})]}),e.jsxs("div",{className:"courses-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Course Management"}),e.jsx("div",{className:"search-container",children:e.jsx("input",{type:"text",placeholder:"Search courses...",className:"search-bar",value:w,onChange:x=>k(x.target.value)})})]}),e.jsx("div",{className:"courses-table-container",children:e.jsxs("table",{className:"admin-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Course Title"}),e.jsx("th",{children:"Instructor"}),e.jsx("th",{children:"Students"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:o.slice(0,5).map(x=>{var N,v;return e.jsxs("tr",{children:[e.jsx("td",{children:x.title}),e.jsx("td",{children:(N=x.instructor)==null?void 0:N.name}),e.jsx("td",{children:((v=x.studentsEnrolled)==null?void 0:v.length)||0}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${x.isPublished?"published":"draft"}`,children:x.isPublished?"Published":"Draft"})}),e.jsx("td",{children:e.jsx(C,{to:`/courses/${x._id}`,className:"btn btn-small btn-view",children:"View"})})]},x._id)})})]})})]}),e.jsxs("div",{className:"quick-actions",children:[e.jsx("h2",{children:"Quick Actions"}),e.jsxs("div",{className:"actions-grid",children:[e.jsxs(C,{to:"/admin/reports",className:"action-card",children:[e.jsx("div",{className:"action-icon",children:"ðŸ“Š"}),e.jsx("h3",{children:"Generate Reports"}),e.jsx("p",{children:"Create detailed analytics reports"})]}),e.jsxs(C,{to:"/courses",className:"action-card",children:[e.jsx("div",{className:"action-icon",children:"ðŸ“š"}),e.jsx("h3",{children:"Manage Courses"}),e.jsx("p",{children:"Review and manage all courses"})]}),e.jsxs(C,{to:"/admin/reports",className:"action-card",children:[e.jsx("div",{className:"action-icon",children:"ðŸ‘¥"}),e.jsx("h3",{children:"User Management"}),e.jsx("p",{children:"View and manage platform users"})]}),e.jsxs(C,{to:"/admin/reports",className:"action-card",children:[e.jsx("div",{className:"action-icon",children:"ðŸ’³"}),e.jsx("h3",{children:"Financial Reports"}),e.jsx("p",{children:"View payment and revenue data"})]})]})]})]})]})};const me=()=>{const{user:r}=s.useContext(D),[n,c]=s.useState("overview"),[d,t]=s.useState({overview:null,courses:null,users:null,financial:null}),[j,o]=s.useState(!0);s.useEffect(()=>{h()},[n]);const h=async()=>{o(!0);try{let l;switch(n){case"overview":l=await S.get("/api/reports/overview",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),t(i=>({...i,overview:l.data.data}));break;case"courses":l=await S.get("/api/reports/courses",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),t(i=>({...i,courses:l.data.data}));break;case"users":l=await S.get("/api/reports/users",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),t(i=>({...i,users:l.data.data}));break;case"financial":l=await S.get("/api/reports/financial",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),t(i=>({...i,financial:l.data.data}));break;default:break}}catch(l){console.error(l)}finally{o(!1)}},u=()=>{const{overview:l}=d;return l?e.jsxs("div",{className:"report-content",children:[e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:"Total Users"}),e.jsx("p",{className:"stat-value",children:l.totals.users})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:"Total Courses"}),e.jsx("p",{className:"stat-value",children:l.totals.courses})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:"Published Courses"}),e.jsx("p",{className:"stat-value",children:l.totals.publishedCourses})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:"Total Submissions"}),e.jsx("p",{className:"stat-value",children:l.totals.submissions})]})]}),e.jsxs("div",{className:"chart-section",children:[e.jsx("h3",{children:"User Roles Distribution"}),e.jsx("div",{className:"roles-chart",children:l.userRoles.map(i=>e.jsxs("div",{className:"role-bar",children:[e.jsxs("div",{className:"role-label",children:[e.jsx("span",{className:"role-name",children:i._id}),e.jsx("span",{className:"role-count",children:i.count})]}),e.jsx("div",{className:"role-progress",children:e.jsx("div",{className:`role-progress-bar role-${i._id}`,style:{width:`${i.count/l.totals.users*100}%`}})})]},i._id))})]}),e.jsxs("div",{className:"recent-activity",children:[e.jsx("h3",{children:"Recent Activity (Last 30 Days)"}),e.jsxs("div",{className:"activity-grid",children:[e.jsxs("div",{className:"activity-card",children:[e.jsx("h4",{children:"New Users"}),e.jsx("p",{className:"activity-value",children:l.recentActivity.users})]}),e.jsxs("div",{className:"activity-card",children:[e.jsx("h4",{children:"New Courses"}),e.jsx("p",{className:"activity-value",children:l.recentActivity.courses})]}),e.jsxs("div",{className:"activity-card",children:[e.jsx("h4",{children:"New Submissions"}),e.jsx("p",{className:"activity-value",children:l.recentActivity.submissions})]})]})]})]}):null},m=()=>{const{courses:l}=d;return l?e.jsx("div",{className:"report-content",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Course Title"}),e.jsx("th",{children:"Instructor"}),e.jsx("th",{children:"Enrollments"}),e.jsx("th",{children:"Avg. Grade"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Revenue"})]})}),e.jsx("tbody",{children:l.map(i=>{var a;return e.jsxs("tr",{children:[e.jsx("td",{children:i.title}),e.jsx("td",{children:(a=i.instructor)==null?void 0:a.name}),e.jsx("td",{children:i.enrollmentCount}),e.jsx("td",{children:i.averageGrade||"N/A"}),e.jsxs("td",{children:["$",i.price]}),e.jsxs("td",{children:["$",i.revenue]})]},i._id)})})]})})}):null},b=()=>{const{users:l}=d;return l?e.jsx("div",{className:"report-content",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Enrolled Courses"}),e.jsx("th",{children:"Submissions"}),e.jsx("th",{children:"Courses Taught"}),e.jsx("th",{children:"Member Since"})]})}),e.jsx("tbody",{children:l.map(i=>e.jsxs("tr",{children:[e.jsx("td",{children:i.name}),e.jsx("td",{children:i.email}),e.jsx("td",{children:i.role}),e.jsx("td",{children:i.enrolledCourses}),e.jsx("td",{children:i.submissions}),e.jsx("td",{children:i.coursesTaught}),e.jsx("td",{children:new Date(i.createdAt).toLocaleDateString()})]},i._id))})]})})}):null},f=()=>{const{financial:l}=d;return l?e.jsxs("div",{className:"report-content",children:[e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:"Total Revenue"}),e.jsxs("p",{className:"stat-value",children:["$",l.totalRevenue]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:"Paid Courses"}),e.jsx("p",{className:"stat-value",children:l.totalPaidCourses})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:"Free Courses"}),e.jsx("p",{className:"stat-value",children:l.totalFreeCourses})]})]}),e.jsxs("div",{className:"table-container",children:[e.jsx("h3",{children:"Course Revenue Breakdown"}),e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Course Title"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Enrollments"}),e.jsx("th",{children:"Revenue"})]})}),e.jsx("tbody",{children:l.courseRevenue.map((i,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:i.title}),e.jsxs("td",{children:["$",i.price]}),e.jsx("td",{children:i.enrollmentCount}),e.jsxs("td",{children:["$",i.revenue]})]},a))})]})]})]}):null};return e.jsxs("div",{className:"admin-reports",children:[e.jsx("h1",{children:"Admin Reports"}),e.jsxs("p",{children:["Welcome, ",r==null?void 0:r.name,"! View system reports and analytics."]}),e.jsxs("div",{className:"report-tabs",children:[e.jsx("button",{className:`tab-button ${n==="overview"?"active":""}`,onClick:()=>c("overview"),children:"Overview"}),e.jsx("button",{className:`tab-button ${n==="courses"?"active":""}`,onClick:()=>c("courses"),children:"Course Performance"}),e.jsx("button",{className:`tab-button ${n==="users"?"active":""}`,onClick:()=>c("users"),children:"User Activity"}),e.jsx("button",{className:`tab-button ${n==="financial"?"active":""}`,onClick:()=>c("financial"),children:"Financial"})]}),j?e.jsx("div",{className:"loading",children:"Loading report data..."}):e.jsxs(e.Fragment,{children:[n==="overview"&&u(),n==="courses"&&m(),n==="users"&&b(),n==="financial"&&f()]})]})};const xe=()=>{const{user:r}=s.useContext(D);R();const[n,c]=s.useState([]),[d,t]=s.useState([]),[j,o]=s.useState(0),[h,u]=s.useState([]),[m,b]=s.useState(!0),[f,l]=s.useState("");s.useEffect(()=>{i()},[]),s.useEffect(()=>{if(f){const a=n.filter(g=>g.title.toLowerCase().includes(f.toLowerCase())||g.description.toLowerCase().includes(f.toLowerCase()));t(a)}else t(n)},[f,n]);const i=async()=>{try{const g=(await S.get("/api/courses")).data.data.filter(v=>v.instructor._id===r._id),w=g.reduce((v,y)=>{var L;return v+(((L=y.studentsEnrolled)==null?void 0:L.length)||0)},0),k=g.map(v=>S.get(`/api/submissions/course/${v._id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})),N=(await Promise.all(k)).flatMap(v=>v.data.data).slice(0,5);c(g),t(g),o(w),u(N),b(!1)}catch(a){console.error(a),b(!1)}};return m?e.jsx("div",{className:"instructor-dashboard",children:"Loading dashboard..."}):e.jsxs("div",{className:"instructor-dashboard",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Instructor Dashboard"}),e.jsxs("p",{children:["Welcome back, ",r==null?void 0:r.name]})]}),e.jsx("div",{children:e.jsx(C,{to:"/instructor/create-course",className:"btn btn-primary",children:"Create New Course"})})]}),e.jsxs("div",{className:"welcome-banner",children:[e.jsx("h2",{children:"Teach and Inspire"}),e.jsx("p",{children:"Manage your courses, grade submissions, and track student progress."})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"ðŸ“š"}),e.jsx("div",{className:"stat-value",children:n.length}),e.jsx("div",{className:"stat-label",children:"Your Courses"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"ðŸ‘¥"}),e.jsx("div",{className:"stat-value",children:j}),e.jsx("div",{className:"stat-label",children:"Total Students"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"ðŸ“"}),e.jsx("div",{className:"stat-value",children:h.length}),e.jsx("div",{className:"stat-label",children:"Pending Submissions"})]})]}),e.jsx("div",{className:"dashboard-search",children:e.jsx("input",{type:"text",placeholder:"Search your courses...",className:"search-bar",value:f,onChange:a=>l(a.target.value)})}),e.jsxs("div",{className:"dashboard-content",children:[e.jsxs("div",{className:"courses-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Your Courses"}),e.jsx(C,{to:"/instructor/courses",className:"btn btn-outline",children:"View All Courses"})]}),d.length>0?e.jsx("div",{className:"courses-grid",children:d.slice(0,3).map(a=>{var g;return e.jsxs("div",{className:"course-card",children:[e.jsx("img",{src:a.thumbnail||"https://via.placeholder.com/300x200/4361ee/ffffff?text=Course+Image",alt:a.title,className:"course-image"}),e.jsxs("div",{className:"course-info",children:[e.jsx("h3",{children:a.title}),e.jsxs("p",{className:"course-description",children:[a.description.substring(0,80),"..."]}),e.jsxs("div",{className:"course-meta",children:[e.jsxs("span",{className:"students-count",children:["ðŸ‘¥ ",((g=a.studentsEnrolled)==null?void 0:g.length)||0," students"]}),e.jsx("span",{className:`status ${a.isPublished?"published":"draft"}`,children:a.isPublished?"Published":"Draft"})]}),e.jsxs("div",{className:"course-actions",children:[e.jsx(C,{to:`/instructor/edit-course/${a._id}`,className:"btn btn-small btn-edit",children:"Edit"}),e.jsx(C,{to:`/instructor/grade/${a._id}`,className:"btn btn-small btn-grade",children:"Grade Submissions"}),e.jsx(C,{to:`/instructor/mark-attendance/${a._id}`,className:"btn btn-small btn-attendance",children:"Attendance"})]})]})]},a._id)})}):e.jsxs("div",{className:"no-courses",children:[e.jsx("h3",{children:"No Courses Found"}),e.jsx("p",{children:"We couldn't find any courses matching your search. Try adjusting your search term."}),e.jsx("button",{className:"btn",onClick:()=>l(""),children:"Clear Search"})]})]}),h.length>0&&e.jsxs("div",{className:"submissions-section",children:[e.jsx("h2",{children:"Recent Submissions"}),e.jsx("div",{className:"submissions-list",children:h.map(a=>{var g;return e.jsxs("div",{className:"submission-item",children:[e.jsxs("div",{className:"submission-info",children:[e.jsx("h4",{children:a.assignmentTitle}),e.jsxs("p",{children:["From ",(g=a.student)==null?void 0:g.name," â€¢ ",new Date(a.createdAt).toLocaleDateString()]})]}),e.jsx("div",{className:"submission-actions",children:e.jsx(C,{to:`/instructor/grade/${a.course._id}`,className:"btn btn-small btn-grade",children:"Grade Now"})})]},a._id)})})]})]})]})};const je=()=>{const{user:r}=s.useContext(D),n=R(),[c,d]=s.useState({title:"",description:"",category:"",price:0,level:"beginner",thumbnail:"",isPublished:!1}),[t,j]=s.useState([{title:"",description:"",videoUrl:"",duration:""}]),[o,h]=s.useState(!1),{title:u,description:m,category:b,price:f,level:l,thumbnail:i,isPublished:a}=c,g=v=>{d({...c,[v.target.name]:v.target.value})},w=v=>{d({...c,[v.target.name]:v.target.checked})},k=(v,y)=>{const L=[...t];L[v][y.target.name]=y.target.value,j(L)},p=()=>{j([...t,{title:"",description:"",videoUrl:"",duration:""}])},x=v=>{if(t.length>1){const y=t.filter((L,A)=>A!==v);j(y)}},N=async v=>{v.preventDefault(),h(!0);try{const y={...c,lessons:t.filter(L=>L.title||L.description),instructor:r._id};await S.post("/api/courses",y,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),alert("Course created successfully!"),n("/instructor/dashboard")}catch(y){console.error(y),alert("Failed to create course")}finally{h(!1)}};return e.jsxs("div",{className:"create-course",children:[e.jsx("h1",{children:"Create New Course"}),e.jsxs("form",{onSubmit:N,className:"course-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"title",children:"Course Title"}),e.jsx("input",{type:"text",id:"title",name:"title",value:u,onChange:g,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:m,onChange:g,rows:"4",required:!0})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"category",children:"Category"}),e.jsx("input",{type:"text",id:"category",name:"category",value:b,onChange:g,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"price",children:"Price ($)"}),e.jsx("input",{type:"number",id:"price",name:"price",value:f,onChange:g,min:"0",step:"0.01"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"level",children:"Level"}),e.jsxs("select",{id:"level",name:"level",value:l,onChange:g,children:[e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"thumbnail",children:"Thumbnail URL"}),e.jsx("input",{type:"text",id:"thumbnail",name:"thumbnail",value:i,onChange:g})]})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{htmlFor:"isPublished",children:[e.jsx("input",{type:"checkbox",id:"isPublished",name:"isPublished",checked:a,onChange:w})," Publish this course"]})}),e.jsxs("div",{className:"lessons-section",children:[e.jsx("h2",{children:"Lessons"}),t.map((v,y)=>e.jsxs("div",{className:"lesson-form",children:[e.jsxs("h3",{children:["Lesson ",y+1]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:`title-${y}`,children:"Lesson Title"}),e.jsx("input",{type:"text",id:`title-${y}`,name:"title",value:v.title,onChange:L=>k(y,L),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:`description-${y}`,children:"Description"}),e.jsx("textarea",{id:`description-${y}`,name:"description",value:v.description,onChange:L=>k(y,L),rows:"3"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:`videoUrl-${y}`,children:"Video URL"}),e.jsx("input",{type:"text",id:`videoUrl-${y}`,name:"videoUrl",value:v.videoUrl,onChange:L=>k(y,L)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:`duration-${y}`,children:"Duration (e.g., 10:30)"}),e.jsx("input",{type:"text",id:`duration-${y}`,name:"duration",value:v.duration,onChange:L=>k(y,L)})]})]}),t.length>1&&e.jsx("button",{type:"button",className:"btn btn-danger",onClick:()=>x(y),children:"Remove Lesson"})]},y)),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:p,children:"Add Another Lesson"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:o,children:o?"Creating...":"Create Course"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>n("/instructor/dashboard"),children:"Cancel"})]})]})]})},pe=()=>{const{id:r}=F();s.useContext(D);const n=R(),[c,d]=s.useState({title:"",description:"",category:"",price:0,level:"beginner",thumbnail:"",isPublished:!1}),[t,j]=s.useState([{title:"",description:"",videoUrl:"",duration:""}]),[o,h]=s.useState(!0),[u,m]=s.useState(!1),{title:b,description:f,category:l,price:i,level:a,thumbnail:g,isPublished:w}=c;s.useEffect(()=>{k()},[r]);const k=async()=>{try{const $=(await S.get(`/api/courses/${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.data;d({title:$.title,description:$.description,category:$.category,price:$.price,level:$.level,thumbnail:$.thumbnail||"",isPublished:$.isPublished||!1}),j($.lessons&&$.lessons.length>0?$.lessons.map(P=>({title:P.title||"",description:P.description||"",videoUrl:P.videoUrl||"",duration:P.duration||""})):[{title:"",description:"",videoUrl:"",duration:""}]),h(!1)}catch(A){console.error(A),alert("Failed to fetch course"),n("/instructor/dashboard")}},p=A=>{d({...c,[A.target.name]:A.target.value})},x=A=>{d({...c,[A.target.name]:A.target.checked})},N=(A,$)=>{const P=[...t];P[A][$.target.name]=$.target.value,j(P)},v=()=>{j([...t,{title:"",description:"",videoUrl:"",duration:""}])},y=A=>{if(t.length>1){const $=t.filter((P,_)=>_!==A);j($)}},L=async A=>{A.preventDefault(),m(!0);try{const $={...c,lessons:t.filter(P=>P.title||P.description)};await S.put(`/api/courses/${r}`,$,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),alert("Course updated successfully!"),n("/instructor/dashboard")}catch($){console.error($),alert("Failed to update course")}finally{m(!1)}};return o?e.jsx("div",{className:"create-course",children:"Loading course..."}):e.jsxs("div",{className:"create-course",children:[e.jsx("h1",{children:"Edit Course"}),e.jsxs("form",{onSubmit:L,className:"course-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"title",children:"Course Title"}),e.jsx("input",{type:"text",id:"title",name:"title",value:b,onChange:p,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:f,onChange:p,rows:"4",required:!0})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"category",children:"Category"}),e.jsx("input",{type:"text",id:"category",name:"category",value:l,onChange:p,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"price",children:"Price ($)"}),e.jsx("input",{type:"number",id:"price",name:"price",value:i,onChange:p,min:"0",step:"0.01"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"level",children:"Level"}),e.jsxs("select",{id:"level",name:"level",value:a,onChange:p,children:[e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"thumbnail",children:"Thumbnail URL"}),e.jsx("input",{type:"text",id:"thumbnail",name:"thumbnail",value:g,onChange:p})]})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{htmlFor:"isPublished",children:[e.jsx("input",{type:"checkbox",id:"isPublished",name:"isPublished",checked:w,onChange:x})," Publish this course"]})}),e.jsxs("div",{className:"lessons-section",children:[e.jsx("h2",{children:"Lessons"}),t.map((A,$)=>e.jsxs("div",{className:"lesson-form",children:[e.jsxs("h3",{children:["Lesson ",$+1]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:`title-${$}`,children:"Lesson Title"}),e.jsx("input",{type:"text",id:`title-${$}`,name:"title",value:A.title,onChange:P=>N($,P),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:`description-${$}`,children:"Description"}),e.jsx("textarea",{id:`description-${$}`,name:"description",value:A.description,onChange:P=>N($,P),rows:"3"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:`videoUrl-${$}`,children:"Video URL"}),e.jsx("input",{type:"text",id:`videoUrl-${$}`,name:"videoUrl",value:A.videoUrl,onChange:P=>N($,P)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:`duration-${$}`,children:"Duration (e.g., 10:30)"}),e.jsx("input",{type:"text",id:`duration-${$}`,name:"duration",value:A.duration,onChange:P=>N($,P)})]})]}),t.length>1&&e.jsx("button",{type:"button",className:"btn btn-danger",onClick:()=>y($),children:"Remove Lesson"})]},$)),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:v,children:"Add Another Lesson"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:u,children:u?"Saving...":"Save Changes"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>n("/instructor/dashboard"),children:"Cancel"})]})]})]})},ve=()=>{const{user:r}=s.useContext(D),[n,c]=s.useState([]),[d,t]=s.useState(!0);s.useEffect(()=>{j()},[]);const j=async()=>{try{const m=(await S.get("/api/courses")).data.data.filter(b=>b.instructor._id===r._id);c(m),t(!1)}catch(u){console.error(u),t(!1)}},o=async(u,m)=>{try{await S.put(`/api/courses/${u}`,{isPublished:!m},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),c(n.map(b=>b._id===u?{...b,isPublished:!m}:b)),alert(`Course ${m?"unpublished":"published"} successfully!`)}catch(b){console.error(b),alert("Failed to update course status")}},h=async u=>{if(window.confirm("Are you sure you want to delete this course? This action cannot be undone."))try{await S.delete(`/api/courses/${u}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),c(n.filter(m=>m._id!==u)),alert("Course deleted successfully!")}catch(m){console.error(m),alert("Failed to delete course")}};return d?e.jsx("div",{className:"instructor-dashboard",children:"Loading..."}):e.jsxs("div",{className:"instructor-dashboard",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsx("h1",{children:"Course Management"}),e.jsx("p",{children:"Manage all your courses"}),e.jsx(C,{to:"/instructor/create-course",className:"btn btn-primary",children:"Create New Course"})]}),e.jsxs("div",{className:"courses-section",children:[e.jsx("h2",{children:"My Courses"}),n.length>0?e.jsx("div",{className:"courses-grid",children:n.map(u=>{var m;return e.jsxs("div",{className:"course-card",children:[e.jsx("img",{src:u.thumbnail||"https://via.placeholder.com/300x200",alt:u.title}),e.jsxs("div",{className:"course-info",children:[e.jsx("h3",{children:u.title}),e.jsx("p",{className:"description",children:u.description}),e.jsxs("div",{className:"course-meta",children:[e.jsxs("span",{className:"students",children:[((m=u.studentsEnrolled)==null?void 0:m.length)||0," students"]}),e.jsx("span",{className:`status ${u.isPublished?"published":"draft"}`,children:u.isPublished?"Published":"Draft"})]}),e.jsxs("div",{className:"course-actions",children:[e.jsx(C,{to:`/instructor/edit-course/${u._id}`,className:"btn btn-small btn-edit",children:"Edit"}),e.jsx(C,{to:`/instructor/grade/${u._id}`,className:"btn btn-small btn-warning",children:"Grade Submissions"}),e.jsx(C,{to:`/instructor/mark-attendance/${u._id}`,className:"btn btn-small btn-info",children:"Mark Attendance"}),e.jsx("button",{className:`btn btn-small ${u.isPublished?"btn-warning":"btn-success"}`,onClick:()=>o(u._id,u.isPublished),children:u.isPublished?"Unpublish":"Publish"}),e.jsx("button",{className:"btn btn-small btn-delete",onClick:()=>h(u._id),children:"Delete"})]})]})]},u._id)})}):e.jsx("p",{children:"You haven't created any courses yet."})]})]})};const ge=()=>{const{user:r}=s.useContext(D),[n,c]=s.useState([]),[d,t]=s.useState(!0);s.useEffect(()=>{j()},[]);const j=async()=>{try{const o=await S.get("/api/progress",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});c(o.data.data),t(!1)}catch(o){console.error(o),t(!1)}};return d?e.jsx("div",{className:"progress-page",children:"Loading..."}):e.jsxs("div",{className:"progress-page",children:[e.jsx("h1",{children:"My Learning Progress"}),e.jsxs("p",{children:["Welcome back, ",r==null?void 0:r.name,"! Track your progress across all enrolled courses."]}),n.length>0?e.jsx("div",{className:"progress-grid",children:n.map(o=>e.jsxs("div",{className:"progress-card",children:[e.jsx("img",{src:o.course.thumbnail||"https://via.placeholder.com/300x200",alt:o.course.title}),e.jsxs("div",{className:"progress-info",children:[e.jsx("h3",{children:o.course.title}),e.jsx("div",{className:"progress-bar-container",children:e.jsx("div",{className:"progress-bar",style:{width:`${o.overallProgress}%`}})}),e.jsxs("p",{className:"progress-text",children:[o.overallProgress,"% Complete"]}),e.jsxs("div",{className:"progress-stats",children:[e.jsxs("span",{children:[o.lessonsCompleted.length," lessons completed"]}),o.completedAt&&e.jsx("span",{className:"completed-badge",children:"Completed"})]}),e.jsxs("div",{className:"progress-actions",children:[e.jsx(C,{to:`/courses/${o.course._id}`,className:"btn btn-primary",children:"Continue Learning"}),e.jsx(C,{to:`/student/attendance/${o.course._id}`,className:"btn btn-secondary",children:"View Attendance"})]})]})]},o.course._id))}):e.jsxs("div",{className:"no-progress",children:[e.jsx("p",{children:"You haven't started any courses yet."}),e.jsx(C,{to:"/courses",className:"btn btn-primary",children:"Browse Courses"})]})]})};const Ne=()=>{const{courseId:r}=F(),{user:n}=s.useContext(D),[c,d]=s.useState([]),[t,j]=s.useState(!0),[o,h]=s.useState({}),[u,m]=s.useState(null);s.useEffect(()=>{b(),f()},[r]);const b=async()=>{try{const a=await S.get(`/api/submissions/course/${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});d(a.data.data),j(!1)}catch(a){console.error(a),j(!1)}},f=async()=>{try{const a=await S.get(`/api/courses/${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});m(a.data.data)}catch(a){console.error(a)}},l=(a,g,w)=>{h(k=>({...k,[a]:{...k[a],[g]:w}}))},i=async a=>{const g=o[a];if(!g||g.grade===void 0){alert("Please enter a grade");return}try{await S.put(`/api/submissions/${a}/grade`,g,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),d(w=>w.map(k=>k._id===a?{...k,grade:g.grade,feedback:g.feedback,gradedBy:n,gradedAt:new Date}:k)),h(w=>{const k={...w};return delete k[a],k}),alert("Grade submitted successfully!")}catch(w){console.error(w),alert("Failed to submit grade")}};return t?e.jsx("div",{className:"grade-submissions",children:"Loading submissions..."}):e.jsxs("div",{className:"grade-submissions",children:[e.jsx("h1",{children:"Grade Submissions"}),u&&e.jsx("h2",{children:u.title}),c.length>0?e.jsx("div",{className:"submissions-list",children:c.map(a=>{var g,w,k,p;return e.jsxs("div",{className:"submission-card",children:[e.jsxs("div",{className:"submission-header",children:[e.jsx("h3",{children:a.assignment}),e.jsxs("p",{children:["Submitted by: ",(g=a.student)==null?void 0:g.name]}),e.jsxs("p",{children:["Submitted on: ",new Date(a.submittedAt).toLocaleString()]})]}),a.submissionText&&e.jsxs("div",{className:"submission-content",children:[e.jsx("h4",{children:"Submission:"}),e.jsx("p",{children:a.submissionText})]}),a.submissionFile&&e.jsxs("div",{className:"submission-file",children:[e.jsx("h4",{children:"Attached File:"}),e.jsx("a",{href:a.submissionFile,target:"_blank",rel:"noopener noreferrer",children:"Download File"})]}),e.jsxs("div",{className:"grading-section",children:[e.jsx("h4",{children:"Grade Assignment"}),e.jsxs("div",{className:"grade-inputs",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Grade (0-100):"}),e.jsx("input",{type:"number",min:"0",max:"100",value:((w=o[a._id])==null?void 0:w.grade)||a.grade||"",onChange:x=>l(a._id,"grade",x.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Feedback:"}),e.jsx("textarea",{value:((k=o[a._id])==null?void 0:k.feedback)||a.feedback||"",onChange:x=>l(a._id,"feedback",x.target.value),rows:"3"})]})]}),e.jsx("button",{className:"btn btn-primary",onClick:()=>i(a._id),disabled:a.gradedAt&&!o[a._id],children:a.gradedAt?"Update Grade":"Submit Grade"}),a.gradedAt&&e.jsxs("div",{className:"previous-grade",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Previous Grade:"})," ",a.grade," by ",(p=a.gradedBy)==null?void 0:p.name," on ",new Date(a.gradedAt).toLocaleString()]}),a.feedback&&e.jsxs("p",{children:[e.jsx("strong",{children:"Feedback:"})," ",a.feedback]})]})]})]},a._id)})}):e.jsx("p",{children:"No submissions found for this course."})]})};const fe=()=>{const{courseId:r}=F();s.useContext(D);const[n,c]=s.useState([]),[d,t]=s.useState(!0),[j,o]=s.useState(null);s.useEffect(()=>{h(),u()},[r]);const h=async()=>{try{const m=await S.get(`/api/submissions/my-grades/${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});c(m.data.data),t(!1)}catch(m){console.error(m),t(!1)}},u=async()=>{try{const m=await S.get(`/api/courses/${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});o(m.data.data)}catch(m){console.error(m)}};return d?e.jsx("div",{className:"my-grades",children:"Loading grades..."}):e.jsxs("div",{className:"my-grades",children:[e.jsx("h1",{children:"My Grades"}),j&&e.jsx("h2",{children:j.title}),n.length>0?e.jsxs("div",{className:"grades-list",children:[n.map(m=>e.jsxs("div",{className:"grade-card",children:[e.jsxs("div",{className:"grade-header",children:[e.jsx("h3",{children:m.assignment}),e.jsxs("p",{children:["Submitted on: ",new Date(m.submittedAt).toLocaleDateString()]})]}),e.jsx("div",{className:"grade-details",children:m.gradedAt?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grade-score",children:[e.jsx("span",{className:"score-label",children:"Grade:"}),e.jsxs("span",{className:"score-value",children:[m.grade,"/100"]})]}),m.feedback&&e.jsxs("div",{className:"grade-feedback",children:[e.jsx("h4",{children:"Feedback:"}),e.jsx("p",{children:m.feedback})]}),e.jsxs("p",{className:"graded-date",children:["Graded on: ",new Date(m.gradedAt).toLocaleDateString()]})]}):e.jsx("p",{className:"pending-grade",children:"Grade pending"})})]},m._id)),e.jsxs("div",{className:"overall-grade",children:[e.jsx("h3",{children:"Overall Performance"}),e.jsx("div",{className:"grade-summary",children:(()=>{const m=n.filter(l=>l.gradedAt);if(m.length===0)return e.jsx("p",{children:"No graded assignments yet"});const b=m.reduce((l,i)=>l+i.grade,0),f=Math.round(b/m.length);return e.jsxs("div",{className:"average-grade",children:[e.jsx("span",{className:"average-label",children:"Average Grade:"}),e.jsxs("span",{className:"average-value",children:[f,"/100"]})]})})()})]})]}):e.jsx("p",{children:"You haven't submitted any assignments for this course yet."})]})};const be=()=>{const{courseId:r}=F(),{user:n}=s.useContext(D),[c,d]=s.useState(null),[t,j]=s.useState([]),[o,h]=s.useState(null),[u,m]=s.useState(!0);s.useEffect(()=>{b()},[r]);const b=async()=>{try{const f=await S.get(`/api/courses/${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});d(f.data.data);const l=await S.get(`/api/attendance/course/${r}/student/${n._id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});j(l.data.data);const i=await S.get(`/api/attendance/course/${r}/student/${n._id}/summary`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});h(i.data.data),m(!1)}catch(f){console.error(f),m(!1)}};return u?e.jsx("div",{className:"view-attendance",children:"Loading attendance data..."}):e.jsxs("div",{className:"view-attendance",children:[e.jsx("h1",{children:"Attendance Records"}),c&&e.jsx("h2",{children:c.title}),o&&e.jsxs("div",{className:"attendance-summary",children:[e.jsx("h3",{children:"Attendance Summary"}),e.jsxs("div",{className:"summary-stats",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-value",children:o.totalSessions}),e.jsx("span",{className:"stat-label",children:"Total Sessions"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-value",children:o.presentCount}),e.jsx("span",{className:"stat-label",children:"Present"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-value",children:o.absentCount}),e.jsx("span",{className:"stat-label",children:"Absent"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-value",children:o.lateCount}),e.jsx("span",{className:"stat-label",children:"Late"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsxs("span",{className:"stat-value",children:[o.attendancePercentage,"%"]}),e.jsx("span",{className:"stat-label",children:"Attendance Rate"})]})]})]}),e.jsxs("div",{className:"attendance-records",children:[e.jsx("h3",{children:"Detailed Records"}),t.length>0?e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Session"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Notes"})]})}),e.jsx("tbody",{children:t.map(f=>e.jsxs("tr",{children:[e.jsx("td",{children:new Date(f.date).toLocaleDateString()}),e.jsx("td",{children:f.session}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${f.status}`,children:f.status.charAt(0).toUpperCase()+f.status.slice(1)})}),e.jsx("td",{children:f.notes||"-"})]},`${f.date}-${f.session}`))})]}):e.jsx("p",{children:"No attendance records found for this course."})]}),e.jsx(C,{to:"/progress",className:"btn btn-secondary",children:"Back to Progress"})]})};const ye=()=>{const{courseId:r}=F(),n=R();s.useContext(D);const[c,d]=s.useState(null),[t,j]=s.useState(!0),[o,h]=s.useState(!1),[u,m]=s.useState("credit_card"),[b,f]=s.useState(""),[l,i]=s.useState(""),[a,g]=s.useState(""),[w,k]=s.useState("");s.useEffect(()=>{p()},[r]);const p=async()=>{try{const N=await S.get(`/api/courses/${r}`);d(N.data.data),j(!1)}catch(N){console.error(N),j(!1)}},x=async N=>{if(N.preventDefault(),h(!0),u==="credit_card"&&(!b||!l||!a||!w)){alert("Please fill in all card details"),h(!1);return}try{const v=await S.post("/api/payments/process",{courseId:r,paymentMethod:u},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});alert("Payment processed successfully!"),n(`/courses/${r}`)}catch(v){console.error(v),alert("Payment failed. Please try again.")}finally{h(!1)}};return t?e.jsx("div",{className:"payment-page",children:"Loading course details..."}):c?c.price<=0?e.jsx("div",{className:"payment-page",children:e.jsxs("div",{className:"payment-container",children:[e.jsx("h1",{children:"Enroll in Course"}),e.jsxs("div",{className:"course-info",children:[e.jsx("h2",{children:c.title}),e.jsx("p",{className:"price",children:"Free Course"}),e.jsx("p",{className:"description",children:c.description})]}),e.jsx("button",{className:"btn btn-primary",onClick:()=>n(`/courses/${r}/enroll-free`),children:"Enroll Now"})]})}):e.jsx("div",{className:"payment-page",children:e.jsxs("div",{className:"payment-container",children:[e.jsx("h1",{children:"Complete Your Purchase"}),e.jsxs("div",{className:"course-info",children:[e.jsx("h2",{children:c.title}),e.jsxs("p",{className:"price",children:["$",c.price]}),e.jsx("p",{className:"description",children:c.description})]}),e.jsxs("form",{onSubmit:x,className:"payment-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Payment Method"}),e.jsxs("select",{value:u,onChange:N=>m(N.target.value),className:"payment-method-select",children:[e.jsx("option",{value:"credit_card",children:"Credit Card"}),e.jsx("option",{value:"debit_card",children:"Debit Card"}),e.jsx("option",{value:"paypal",children:"PayPal"}),e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),e.jsx("option",{value:"crypto",children:"Cryptocurrency"})]})]}),u==="credit_card"&&e.jsxs("div",{className:"card-details",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Card Number"}),e.jsx("input",{type:"text",value:b,onChange:N=>f(N.target.value),placeholder:"1234 5678 9012 3456",maxLength:"19"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Expiry Date"}),e.jsx("input",{type:"text",value:l,onChange:N=>i(N.target.value),placeholder:"MM/YY",maxLength:"5"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"CVV"}),e.jsx("input",{type:"text",value:a,onChange:N=>g(N.target.value),placeholder:"123",maxLength:"4"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Name on Card"}),e.jsx("input",{type:"text",value:w,onChange:N=>k(N.target.value),placeholder:"John Doe"})]})]}),e.jsx("button",{type:"submit",className:"btn btn-primary pay-button",disabled:o,children:o?"Processing...":`Pay $${c.price}`})]}),e.jsx("div",{className:"security-note",children:e.jsx("p",{children:"ðŸ”’ Your payment details are securely encrypted"})})]})}):e.jsx("div",{className:"payment-page",children:"Course not found."})};const Ce=()=>{s.useContext(D);const[r,n]=s.useState([]),[c,d]=s.useState(!0);s.useEffect(()=>{t()},[]);const t=async()=>{try{const h=await S.get("/api/payments/history",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});n(h.data.data),d(!1)}catch(h){console.error(h),d(!1)}},j=h=>{switch(h){case"completed":return"status-completed";case"pending":return"status-pending";case"failed":return"status-failed";case"refunded":return"status-refunded";default:return""}},o=h=>{switch(h){case"credit_card":return"Credit Card";case"debit_card":return"Debit Card";case"paypal":return"PayPal";case"bank_transfer":return"Bank Transfer";case"crypto":return"Cryptocurrency";default:return h}};return c?e.jsx("div",{className:"payment-history",children:"Loading payment history..."}):e.jsxs("div",{className:"payment-history",children:[e.jsx("h1",{children:"Payment History"}),e.jsx("p",{children:"View your course purchase history and payment details."}),r.length>0?e.jsx("div",{className:"payments-list",children:r.map(h=>{var u;return e.jsxs("div",{className:"payment-card",children:[e.jsxs("div",{className:"payment-header",children:[e.jsx("h3",{children:((u=h.course)==null?void 0:u.title)||"Unknown Course"}),e.jsx("span",{className:`status-badge ${j(h.status)}`,children:h.status.charAt(0).toUpperCase()+h.status.slice(1)})]}),e.jsxs("div",{className:"payment-details",children:[e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"label",children:"Amount:"}),e.jsxs("span",{className:"value",children:["$",h.amount]})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"label",children:"Payment Method:"}),e.jsx("span",{className:"value",children:o(h.paymentMethod)})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"label",children:"Transaction ID:"}),e.jsx("span",{className:"value",children:h.transactionId})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"label",children:"Date:"}),e.jsxs("span",{className:"value",children:[new Date(h.createdAt).toLocaleDateString()," at"," ",new Date(h.createdAt).toLocaleTimeString()]})]}),h.refundedAt&&e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"label",children:"Refunded:"}),e.jsxs("span",{className:"value",children:[new Date(h.refundedAt).toLocaleDateString()," at"," ",new Date(h.refundedAt).toLocaleTimeString()]})]})]})]},h._id)})}):e.jsx("div",{className:"no-payments",children:e.jsx("p",{children:"You haven't made any payments yet."})})]})};const Se=()=>{const{user:r,isAuthenticated:n,logout:c}=s.useContext(D),d=R(),t=()=>{c(),d("/")};return e.jsx("nav",{className:"navbar",children:e.jsxs("div",{className:"nav-container",children:[e.jsx(C,{to:"/",className:"nav-logo",children:"IntelliLearn"}),e.jsxs("ul",{className:"nav-menu",children:[e.jsx("li",{className:"nav-item",children:e.jsx(C,{to:"/",className:"nav-link",children:"Home"})}),e.jsx("li",{className:"nav-item",children:e.jsx(C,{to:"/courses",className:"nav-link",children:"Courses"})}),n?e.jsxs(e.Fragment,{children:[e.jsx("li",{className:"nav-item",children:e.jsx(C,{to:"/dashboard",className:"nav-link",children:"Dashboard"})}),e.jsx("li",{className:"nav-item",children:e.jsx(C,{to:"/progress",className:"nav-link",children:"My Progress"})}),e.jsx("li",{className:"nav-item",children:e.jsx(C,{to:"/payment-history",className:"nav-link",children:"Payment History"})}),(r.role==="instructor"||r.role==="admin")&&e.jsx("li",{className:"nav-item",children:e.jsx(C,{to:"/instructor/courses",className:"nav-link",children:"My Courses"})}),r.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{className:"nav-item",children:e.jsx(C,{to:"/admin/dashboard",className:"nav-link",children:"Admin Dashboard"})}),e.jsx("li",{className:"nav-item",children:e.jsx(C,{to:"/admin/reports",className:"nav-link",children:"Reports"})})]}),e.jsx("li",{className:"nav-item",children:e.jsx("span",{className:"nav-link",onClick:t,children:"Logout"})}),e.jsx("li",{className:"nav-item",children:e.jsxs("span",{className:"nav-welcome",children:["Welcome, ",r==null?void 0:r.name]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("li",{className:"nav-item",children:e.jsx(C,{to:"/login",className:"nav-link",children:"Login"})}),e.jsx("li",{className:"nav-item",children:e.jsx(C,{to:"/register",className:"nav-link",children:"Register"})})]})]})]})})};const we=()=>e.jsxs("footer",{className:"footer",children:[e.jsxs("div",{className:"footer-content container",children:[e.jsxs("div",{className:"footer-section",children:[e.jsx("h3",{className:"footer-logo",children:"IntelliLearn"}),e.jsx("p",{className:"footer-description",children:"Transform your learning experience with our cutting-edge platform designed for the modern learner."}),e.jsxs("div",{className:"social-links",children:[e.jsx("a",{href:"#",className:"social-link",children:"ðŸ“˜"}),e.jsx("a",{href:"#",className:"social-link",children:"ðŸ¦"}),e.jsx("a",{href:"#",className:"social-link",children:"ðŸ“·"}),e.jsx("a",{href:"#",className:"social-link",children:"ðŸ’¼"})]})]}),e.jsxs("div",{className:"footer-section",children:[e.jsx("h4",{className:"footer-heading",children:"Quick Links"}),e.jsxs("ul",{className:"footer-links",children:[e.jsx("li",{children:e.jsx("a",{href:"/",children:"Home"})}),e.jsx("li",{children:e.jsx("a",{href:"/courses",children:"Courses"})}),e.jsx("li",{children:e.jsx("a",{href:"/about",children:"About Us"})}),e.jsx("li",{children:e.jsx("a",{href:"/contact",children:"Contact"})})]})]}),e.jsxs("div",{className:"footer-section",children:[e.jsx("h4",{className:"footer-heading",children:"Categories"}),e.jsxs("ul",{className:"footer-links",children:[e.jsx("li",{children:e.jsx("a",{href:"/courses?category=technology",children:"Technology"})}),e.jsx("li",{children:e.jsx("a",{href:"/courses?category=business",children:"Business"})}),e.jsx("li",{children:e.jsx("a",{href:"/courses?category=design",children:"Design"})}),e.jsx("li",{children:e.jsx("a",{href:"/courses?category=marketing",children:"Marketing"})})]})]}),e.jsxs("div",{className:"footer-section",children:[e.jsx("h4",{className:"footer-heading",children:"Contact Us"}),e.jsxs("div",{className:"contact-info",children:[e.jsx("p",{children:"ðŸ“§ info@intellilearn.com"}),e.jsx("p",{children:"ðŸ“ž (123) 456-7890"}),e.jsx("p",{children:"ðŸ“ 123 Education St, Learning City"})]})]})]}),e.jsx("div",{className:"footer-bottom",children:e.jsx("div",{className:"container",children:e.jsx("p",{children:"Â© 2025 IntelliLearn. All rights reserved. Empowering learners worldwide."})})})]});const Y=()=>e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading..."})]}),G=({children:r})=>{const{user:n,loading:c,isAuthenticated:d}=s.useContext(D);return c?e.jsx(Y,{}):!d||n.role!=="admin"?e.jsx(q,{to:"/"}):r},I=({children:r})=>{const{user:n,loading:c,isAuthenticated:d}=s.useContext(D);return c?e.jsx(Y,{}):!d||n.role!=="instructor"&&n.role!=="admin"?e.jsx(q,{to:"/"}):r};const $e=()=>{const{courseId:r}=F();s.useContext(D);const[n,c]=s.useState(null),[d,t]=s.useState([]),[j,o]=s.useState(""),[h,u]=s.useState(new Date().toISOString().split("T")[0]),[m,b]=s.useState({}),[f,l]=s.useState(!0),[i,a]=s.useState(!1);s.useEffect(()=>{g()},[r]);const g=async()=>{try{const p=await S.get(`/api/courses/${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});c(p.data.data),t(p.data.data.studentsEnrolled||[]),l(!1)}catch(p){console.error(p),l(!1)}},w=(p,x,N)=>{b(v=>({...v,[p]:{...v[p],[x]:N}}))},k=async p=>{if(p.preventDefault(),!j){alert("Please enter a session name");return}a(!0);try{const x=d.map(async N=>{const v=m[N._id]||{};return S.post("/api/attendance/mark",{courseId:r,studentId:N._id,session:j,date:h,status:v.status||"present",notes:v.notes||""},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})});await Promise.all(x),alert("Attendance marked successfully!")}catch(x){console.error(x),alert("Failed to mark attendance. Please try again.")}finally{a(!1)}};return f?e.jsx("div",{className:"mark-attendance",children:"Loading course and student data..."}):e.jsxs("div",{className:"mark-attendance",children:[e.jsx("h1",{children:"Mark Attendance"}),n&&e.jsx("h2",{children:n.title}),e.jsxs("form",{onSubmit:k,className:"attendance-form",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"session",children:"Session:"}),e.jsx("input",{type:"text",id:"session",value:j,onChange:p=>o(p.target.value),placeholder:"e.g., Week 1, Lecture 1",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"date",children:"Date:"}),e.jsx("input",{type:"date",id:"date",value:h,onChange:p=>u(p.target.value),required:!0})]})]}),e.jsxs("div",{className:"students-table",children:[e.jsx("h3",{children:"Students"}),e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Student Name"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Notes"})]})}),e.jsx("tbody",{children:d.map(p=>{var x,N;return e.jsxs("tr",{children:[e.jsx("td",{children:p.name}),e.jsx("td",{children:e.jsxs("select",{value:((x=m[p._id])==null?void 0:x.status)||"present",onChange:v=>w(p._id,"status",v.target.value),children:[e.jsx("option",{value:"present",children:"Present"}),e.jsx("option",{value:"absent",children:"Absent"}),e.jsx("option",{value:"late",children:"Late"})]})}),e.jsx("td",{children:e.jsx("input",{type:"text",value:((N=m[p._id])==null?void 0:N.notes)||"",onChange:v=>w(p._id,"notes",v.target.value),placeholder:"Additional notes"})})]},p._id)})})]})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:i,children:i?"Submitting...":"Submit Attendance"})]})]})};function ke(){return e.jsx(B,{children:e.jsx(J,{children:e.jsxs("div",{className:"App",children:[e.jsx(Se,{}),e.jsxs(Q,{children:[e.jsx(E,{path:"/",element:e.jsx(re,{})}),e.jsx(E,{path:"/login",element:e.jsx(ne,{})}),e.jsx(E,{path:"/register",element:e.jsx(le,{})}),e.jsx(E,{path:"/dashboard",element:e.jsx(ie,{})}),e.jsx(E,{path:"/progress",element:e.jsx(ge,{})}),e.jsx(E,{path:"/courses",element:e.jsx(de,{})}),e.jsx(E,{path:"/courses/:id",element:e.jsx(he,{})}),e.jsx(E,{path:"/checkout/:courseId",element:e.jsx(ye,{})}),e.jsx(E,{path:"/payment-history",element:e.jsx(Ce,{})}),e.jsx(E,{path:"/admin/dashboard",element:e.jsx(G,{children:e.jsx(ue,{})})}),e.jsx(E,{path:"/admin/reports",element:e.jsx(G,{children:e.jsx(me,{})})}),e.jsx(E,{path:"/instructor/dashboard",element:e.jsx(I,{children:e.jsx(xe,{})})}),e.jsx(E,{path:"/instructor/courses",element:e.jsx(I,{children:e.jsx(ve,{})})}),e.jsx(E,{path:"/instructor/create-course",element:e.jsx(I,{children:e.jsx(je,{})})}),e.jsx(E,{path:"/instructor/edit-course/:id",element:e.jsx(I,{children:e.jsx(pe,{})})}),e.jsx(E,{path:"/instructor/grade/:courseId",element:e.jsx(I,{children:e.jsx(Ne,{})})}),e.jsx(E,{path:"/instructor/mark-attendance/:courseId",element:e.jsx(I,{children:e.jsx($e,{})})}),e.jsx(E,{path:"/student/grades/:courseId",element:e.jsx(B,{children:e.jsx(fe,{})})}),e.jsx(E,{path:"/student/attendance/:courseId",element:e.jsx(B,{children:e.jsx(be,{})})})]}),e.jsx(we,{})]})})})}U.createRoot(document.getElementById("root")).render(e.jsx(K.StrictMode,{children:e.jsx(ke,{})}));
